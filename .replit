modules = ["nodejs-20", "web"]
[agent]
expertMode = true

[nix]
channel = "stable-25_05"

[workflows]

[[workflows.workflow]]
name = "Build for GitHub Pages"
author = 41767715
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run build"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/.nojekyll dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/404.html dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/ads.txt dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/robots.txt dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"Build complete! Files ready for GitHub Pages.\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"Next steps:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"1. Commit and push the 'dist' folder to your GitHub repository\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"2. In GitHub Settings > Pages, set source to 'Deploy from a branch'\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"3. Select the branch containing 'dist' folder and '/dist' as the folder\""

[deployment]
build = ["npm", "run", "build"]
publicDir = "dist"

[[deployment.rewrites]]
from = "/*"
to = "/index.html"
