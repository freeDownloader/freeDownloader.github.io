modules = ["nodejs-20", "web"]
[agent]
expertMode = true

[nix]
channel = "stable-25_05"

[workflows]

[[workflows.workflow]]
name = "Build for GitHub Pages"
author = 41767715
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm run build"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/.nojekyll dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/404.html dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/ads.txt dist/"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cp public/robots.txt dist/ 2>/dev/null || true"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Build complete! Files ready for GitHub Pages.\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìã Deployment Steps:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"1. Push kode ke GitHub repository Anda\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"2. Di GitHub Settings > Pages:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"   - Source: 'GitHub Actions' (RECOMMENDED) atau 'Deploy from branch'\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"   - Jika pakai branch: pilih branch dan folder '/dist'\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"3. Website akan live di: https://freedownloader.github.io/\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìÅ Build output ada di folder 'dist/'\""

[deployment]
build = ["npm", "run", "build"]
publicDir = "dist"

[[deployment.rewrites]]
from = "/*"
to = "/index.html"
